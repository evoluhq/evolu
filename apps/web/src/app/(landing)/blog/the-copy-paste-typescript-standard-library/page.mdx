import { ArticleLayout } from "@/components/ArticleLayout";

export const article = {
  author: "Daniel Steigerwald",
  date: "2025-08-10",
  title: "The Copyâ€‘Paste TypeScript Standard Library",
  description:
    "I have an idea for a copyâ€‘pasteable TypeScript standard library â€” a collection of code snippets so small and simple that you can just copy-paste them.",
};

export const metadata = {
  title: article.title,
  description: article.description,
};

export default (props) => <ArticleLayout article={article} {...props} />;

I have an idea for a copyâ€‘pasteable TypeScript standard library â€” a collection of code snippets so small and simple that you can just copy-paste them.

## Why not a dependency?

- A dependency means â€œthis thing will change and it will suck.â€
- Every dependency is a kind of vendor lockâ€‘in.
- You import tons of code you donâ€™t fully understand.
- It will break eventually, and youâ€™ll be forced to react on someone elseâ€™s schedule.

Letâ€™s normalize copyâ€‘pasting. If it breaks, you probably copy-pasted something you didnâ€™t understand â€” and thatâ€™s on you.

## What qualifies as copyâ€‘pasteable

- One file, no imports, no side effects.
- Clear name, obvious API, readable in one sitting.
- Works across environments (Node/Browser/ESM) with no build tricks.

## The convention

Put vendored snippets under a clearly marked folder. No headers, no links, no â€œgo check upstream.â€ The path itself tells the story.

- `_copypaste/Evolu/Result.ts`
  - `_copypaste` signals â€œwe copied this on purposeâ€
  - `Evolu` indicates the source
  - `Result.ts` keeps the canonical name

Example import:

```ts
import {
  Result,
  ok,
  err,
  trySync,
  tryAsync,
  getOrThrow,
} from "./_copypaste/Evolu/Result.js";
```

Optional project structure:

```text
src/
  _copypaste/
    Evolu/
      Result.ts
  app/
    ...
```

## Updates (when you actually need them)

- Replace the file wholesale with a fresh copy.
- Local edits are encouraged â€” itâ€™s your code. Modify freely to fit your needs.

## Tests

Ideally, a copyâ€‘pasted file would include tests written in a style that doubles as documentation, but thereâ€™s no standard for inâ€‘code tests (yet). So copyâ€‘paste the tests and hope they run everywhere (hint: Bun and Vitest can run many Jest tests).

## But I need imports!

Copyâ€‘pasteable code can have imports only to dependencies that are considered to be completed and have zero deps. They have to manifest breaking changes only via types, so TypeScript can detect that. With such an approach, we don't need versioning. Types are a strong enough contract.

## Is this a joke?

Itâ€™s half a joke and half the truth. Programmers should understand the code they use, deps should be stable, and ethically copyâ€‘pasted code you can trust is OK. We donâ€™t need more deps; we need fewer, smaller, more understandable pieces of code we own â€” the localâ€‘first code ğŸ™ƒ.

## Hereâ€™s some code you can copyâ€‘paste

- [Result](https://github.com/evoluhq/evolu/blob/main/packages/common/src/Result.ts) (typeâ€‘safe errors)
- [Brand](https://github.com/evoluhq/evolu/blob/main/packages/common/src/Brand.ts) (prevents mixing incompatible values, e.g., `type UserId = string & Brand<"UserId">`)
- [Assert](https://github.com/evoluhq/evolu/blob/main/packages/common/src/Assert.ts) (failâ€‘fast helpers: `assert`, `assertNonEmptyArray`)
- [Array](https://github.com/evoluhq/evolu/blob/main/packages/common/src/Array.ts) (nonâ€‘empty arrays and helpers: `NonEmptyArray`, `isNonEmptyArray`, `appendToArray`)
- [Function](https://github.com/evoluhq/evolu/blob/main/packages/common/src/Function.ts) (small function utils: `exhaustiveCheck`, `identity`, `Lazy`)
- [Object](https://github.com/evoluhq/evolu/blob/main/packages/common/src/Object.ts) (object helpers: `isPlainObject`, `mapObject`, `objectToEntries`, `excludeProp`)
- [Order](https://github.com/evoluhq/evolu/blob/main/packages/common/src/Order.ts) (ordering utilities: `orderNumber`, `orderString`, `reverseOrder`, `orderUint8Array`)
- [Time](https://github.com/evoluhq/evolu/blob/main/packages/common/src/Time.ts) (DIâ€‘friendly time: `Time`, `createTime`, `testCreateTime`)

As for "DIâ€‘friendly", check conventions-based [dependency injection](/docs/dependency-injection).
